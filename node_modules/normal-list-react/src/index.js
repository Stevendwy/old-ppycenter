import React, {Component} from 'react'
import {render} from 'react-dom'
import NormalList from './normal_list'
import Pagination from 'pagination-react'

class NPM extends Component {
	constructor() {
		super()
		this.state = {
			normalListData: null
		}
	}

	componentDidMount() {
		this.setState({normalListData: {
			"code": 1,
			"msg": "",
			"total": 279,
			"total_page": 28,
			"page": 2,
			"data":[
				{
					"type": "vin",
					"num": 1,
					"total_money": "¥6002.8",
					"createtime": "2017-09-13 13:25",
					"title": "WBAVM9100CVT67370 > 宝马1 > X1 X20I  (EUR)_2012年"
	        	},
				{
					"type": "vin",
					"num": 2,
					"total_money": "¥6002.8",
					"createtime": "2017-09-13 13:25",
					"title": "WBAVM9100CVT67370 > 宝马2> X1 X20I  (EUR)_2012年"
	        	},
				{
					"type": "vin",
					"num": 3,
					"total_money": "¥6002.8",
					"createtime": "2017-09-13 13:25",
					"title": "WBAVM9100CVT67370 > 宝马3 > X1 X20I  (EUR)_2012年"
	        	},
				{
					"type": "vin",
					"num": 4,
					"total_money": "¥6002.8",
					"createtime": "2017-09-13 13:25",
					"title": "WBAVM9100CVT67370 > 宝马4 > X1 X20I  (EUR)_2012年"
	        	},
				{
					"type": "vin",
					"num": 5,
					"total_money": "¥6002.8",
					"createtime": "2017-09-13 13:25",
					"title": "WBAVM9100CVT67370 > 宝马5 > X1 X20I  (EUR)_2012年"
	        	}
			]
		}})
	}

	listClick(item) {
		alert(JSON.stringify(item))
	}

	render() {
		let _normalListData = this.state.normalListData

		return (
			<div>
				<div>报价单 (最近30日报价单)</div>
				{
					_normalListData ? (
						<NormalList
							data={_normalListData.data}
							headerTitles={['序号', 'VIN / 车型', '报价金额', '创建时间']}
							itemKeys={['num', 'title', 'total_money', 'createtime']}
							listClick={this.listClick.bind(this)}/>
					) : null
				}
				{
					_normalListData ? (
						<Pagination
							count={_normalListData.total_page}
							groupCount={10}
							selectedCount={1}
							callback={index => console.log(index)}/>
					) : null
				}
			</div>

		)
	}
}

render(<NPM />, document.getElementById("npm"))
